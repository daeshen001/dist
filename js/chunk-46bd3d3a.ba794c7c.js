(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46bd3d3a"],{"5e96":function(e,t,n){},"6d9d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("h2",{staticClass:"title"},[e._v("\n            绑定角色权限:\n            "),n("Tag",{attrs:{color:"blue"}},[e._v(e._s(e.role.name))])],1),n("Button",{staticClass:"back",attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.$router.go(-1)}}},[n("Icon",{attrs:{type:"md-arrow-back"}}),e._v("\n            返回\n        ")],1)],1),n("Row",{staticClass:"margin-top-10 margin-bottom-10",attrs:{gutter:10}},[n("i-col",{attrs:{span:e.span}},[n("Card",[n("Tree",{ref:"menu",attrs:{data:e.menus,render:e.renderTree,"show-checkbox":""}})],1)],1),e.hasButton?n("i-col",{attrs:{span:e.span}},[n("Card",[n("Tree",{ref:"button",attrs:{data:e.buttons,render:e.renderTree,"show-checkbox":""}})],1)],1):e._e(),e.hasApi?n("i-col",{attrs:{span:e.span}},[n("Card",[n("Tree",{ref:"api",attrs:{data:e.apis,render:e.renderTree,"show-checkbox":""}})],1)],1):e._e()],1),n("Button",{attrs:{type:"success",long:""},on:{click:e.save}},[e._v("保存")])],1)},i=[],s=n("75fc"),a=(n("ac6a"),n("96cf"),n("3b8d")),c=(n("7f7f"),n("cadf"),n("551c"),n("097d"),n("88ec")),o=n("e069"),u={name:"RoleBindPermission",data:function(){return{role:{id:this.$route.query.id,name:this.$route.query.name},menus:[],buttons:[],apis:[]}},computed:{hasButton:function(){return $config.PERMISSION_BUTTON},hasApi:function(){return $config.PERMISSION_API},span:function(){return this.hasButton&&this.hasApi?8:this.hasButton||this.hasApi?12:24}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{initChecked:function(e,t){var n=this;e.forEach(function(e){if(e.children&&e.children.length)return n.initChecked(e.children,t);t.some(function(t){return t.id===e.id})&&(e.checked=!0)})},load:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,s,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get("/api/permission/role/permission/list/".concat(this.role.id));case 2:if(t=e.sent,!t.success){e.next=9;break}return n=t.value,e.next=7,this.get("/api/permission/list");case 7:r=e.sent,r.success&&(i=r.value,s=i.filter(function(e){return 1===e.type}),s=Object(c["e"])(s,0,"parent"),s.forEach(function(e){return e.expand=!0}),this.initChecked(s,n),this.menus=s,this.hasButton&&(a=i.filter(function(e){return 3!==e.type}),a=Object(c["e"])(a,0,"parent"),a.forEach(function(e){return e.expand=!0}),this.initChecked(a,n),this.buttons=a),this.hasApi&&(o=i.filter(function(e){return 3===e.type}),o.filter(function(e){return n.some(function(t){return t.id===e.id})}).forEach(function(e){return e.checked=!0}),this.apis=o));case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),renderTree:function(e,t){t.root,t.node;var n=t.data;return e("span",{style:"display:inline-block; width: 100%"},[e("span",[n.name]),e("span",{class:"margin-left-10",style:"font-size: 14px; color: #909399"},[n.value]),3!==n.type?e(o["Tag"],{class:"margin-left-10",attrs:{color:1===n.type?"green":"orange"}},[1===n.type?"菜单":"按钮"]):""])},save:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$refs.menu.getCheckedAndIndeterminateNodes(),n=this.hasButton?this.$refs.button.getCheckedAndIndeterminateNodes():[],r=this.hasApi?this.$refs.api.getCheckedAndIndeterminateNodes():[],i=[].concat(Object(s["a"])(t),Object(s["a"])(n.filter(function(e){return 2===e.type})),Object(s["a"])(r)),e.next=6,this.post("/api/permission/role/bind/".concat(this.role.id),i.map(function(e){return e.id}));case 6:if(a=e.sent,!a.success){e.next=11;break}return this.$Notice.success({title:"绑定权限资源成功"}),e.next=11,this.load();case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},h=u,d=(n("7857"),n("2877")),p=Object(d["a"])(h,r,i,!1,null,"06d03a50",null);p.options.__file="bind.vue";t["default"]=p.exports},7857:function(e,t,n){"use strict";var r=n("5e96"),i=n.n(r);i.a}}]);
//# sourceMappingURL=chunk-46bd3d3a.ba794c7c.js.map