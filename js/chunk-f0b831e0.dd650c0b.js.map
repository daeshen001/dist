{"version":3,"sources":["webpack:///./node_modules/core-js/library/fn/reflect/has.js","webpack:///./src/fx/views/permission/permission.vue?303b","webpack:///./src/fx/views/permission/permission.vue?f12c","webpack:///src/fx/views/permission/permission.vue","webpack:///./src/fx/views/permission/permission.vue?a835","webpack:///./src/fx/views/permission/permission.vue","webpack:///./node_modules/core-js/library/modules/es6.reflect.has.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/reflect/has.js","webpack:///./src/mixins/model-view.js"],"names":["__webpack_require__","module","exports","Reflect","has","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_permission_vue_vue_type_style_index_0_id_3d2d2f9f_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_10_oneOf_1_0_node_modules_css_loader_index_js_ref_10_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_10_oneOf_1_2_node_modules_less_loader_dist_cjs_js_ref_10_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_permission_vue_vue_type_style_index_0_id_3d2d2f9f_lang_less_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","attrs","gutter","span","staticClass","slot","max-width","content","color","_v","directives","name","rawName","value","expression","modifiers","show","staticStyle","cursor","type","size","on","click","syncMenus","data","menus","renderMenus","buttons","renderButtons","syncApis","apis","columns","cols","title","modelTitle","loading","loadingBtn","on-ok","addOrUpdate","on-cancel","cancel","model","callback","$$v","ref","vo","label-width","rules","validate","label","prop","$set","staticRenderFns","permissionvue_type_script_lang_js_","mixins","model_view","parent","required","trigger","message","key","addUrl","updateUrl","removeUrl","computed","generateAddOrUpdate","Object","objectSpread","concat","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","ms","wrap","_context","prev","next","router","forEach","m","expand","loadButtons","loadApis","stop","apply","arguments","methods","_syncMenus","_callee2","result","_context2","post","reduce","c","toConsumableArray","children","sent","success","$Notice","_syncApis","_callee3","_context3","doQuery","_doQuery","_callee4","_context4","_loadApis","_callee5","_context5","get","_loadButtons","_callee6","cache","btns","_context6","cacheBtnExpand","filter","p","b","some","id","common","_this","length","d","push","h","_ref","root","node","style","class","_ref2","_this2","iview","icon","addBtn","updateBtn","remove","item","add","update","startsWith","substring","permission_permissionvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","$export","S","target","propertyKey","addTitle","updateTitle","isUpdate","undefined","postUrl","D_jiyu_frontend_node_modules_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_6__","formRef","generateRemove","beforeAddOrUpdate","_beforeAddOrUpdate","D_jiyu_frontend_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_5__","afterAddOrUpdate","_afterAddOrUpdate","doRequest","_doRequest","abrupt","_addOrUpdate","form","$refs","D_jiyu_frontend_node_modules_babel_runtime_corejs2_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_3___default","valid","doAddOrUpdate","resetLoadingBtn","$Message","error","_x","_doAddOrUpdate","before","res","_res","_timeoutQuery","beforeRemove","_beforeRemove","_callee7","_context7","__removeUrl","_x2","afterRemove","_afterRemove","_callee8","_context8","_x3","_x4","_remove","_callee9","_context9","_x5","vScrollToTop","resetFields","D_jiyu_frontend_node_modules_babel_runtime_corejs2_core_js_object_keys__WEBPACK_IMPORTED_MODULE_1___default","D_jiyu_frontend_node_modules_babel_runtime_corejs2_core_js_reflect_has__WEBPACK_IMPORTED_MODULE_0___default","scrollTo","x","y","_this3","$nextTick","_this4","setTimeout"],"mappings":"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","file":"js/chunk-f0b831e0.dd650c0b.js","sourcesContent":["require('../../modules/es6.reflect.has');\nmodule.exports = require('../../modules/_core').Reflect.has;\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=style&index=0&id=3d2d2f9f&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=style&index=0&id=3d2d2f9f&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Row',{attrs:{\"gutter\":10}},[_c('i-col',{attrs:{\"span\":\"8\"}},[_c('Card',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Tooltip',{attrs:{\"max-width\":\"200\",\"content\":\"菜单权限由页面路由定义，不提供任何编辑功能，只能执行将权限数据同步到数据库的操作。\"}},[_c('Tag',{attrs:{\"color\":\"green\"}},[_vm._v(\"菜单\")]),_vm._v(\"\\n                        权限资源\\n                    \")],1)],1),_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('Tooltip',{directives:[{name:\"permission\",rawName:\"v-permission.show\",value:('b:perm:menu:sync'),expression:\"'b:perm:menu:sync'\",modifiers:{\"show\":true}}],staticStyle:{\"cursor\":\"pointer\"},attrs:{\"content\":\"同步\"}},[_c('Icon',{attrs:{\"type\":\"md-sync\",\"size\":\"28\"},on:{\"click\":_vm.syncMenus}})],1)],1),_c('Tree',{attrs:{\"data\":_vm.menus,\"render\":_vm.renderMenus}})],1)],1),_c('i-col',{attrs:{\"span\":\"8\"}},[_c('Card',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Tooltip',{attrs:{\"max-width\":\"200\",\"content\":\"按钮权限是依附在菜单权限下的，这样能帮助您更好区分相似的按钮权限。\"}},[_c('Tag',{attrs:{\"color\":\"orange\"}},[_vm._v(\"按钮\")]),_vm._v(\"\\n                        权限资源\\n                    \")],1)],1),_c('Tree',{attrs:{\"data\":_vm.buttons,\"render\":_vm.renderButtons}})],1)],1),_c('i-col',{attrs:{\"span\":\"8\"}},[_c('Card',[_c('div',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('Tooltip',{attrs:{\"max-width\":\"200\",\"content\":\"接口菜单权限由后台定义，不提供任何编辑功能，只能执行将权限数据同步到数据库的操作。\"}},[_c('Tag',{attrs:{\"color\":\"blue\"}},[_vm._v(\"接口\")]),_vm._v(\"\\n                        权限资源\\n                    \")],1)],1),_c('div',{attrs:{\"slot\":\"extra\"},slot:\"extra\"},[_c('Tooltip',{directives:[{name:\"permission\",rawName:\"v-permission.show\",value:('b:perm:api:sync'),expression:\"'b:perm:api:sync'\",modifiers:{\"show\":true}}],staticStyle:{\"cursor\":\"pointer\"},attrs:{\"content\":\"同步\"}},[_c('Icon',{attrs:{\"type\":\"md-sync\",\"size\":\"28\"},on:{\"click\":_vm.syncApis}})],1)],1),_c('Table',{attrs:{\"data\":_vm.apis,\"columns\":_vm.cols,\"size\":\"small\"}})],1)],1)],1),_c('Modal',{attrs:{\"title\":_vm.modelTitle,\"loading\":_vm.loadingBtn},on:{\"on-ok\":_vm.addOrUpdate,\"on-cancel\":_vm.cancel},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}},[_c('Form',{ref:\"form\",attrs:{\"model\":_vm.vo,\"label-width\":60,\"rules\":_vm.validate}},[_c('Form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('Input',{model:{value:(_vm.vo.name),callback:function ($$v) {_vm.$set(_vm.vo, \"name\", $$v)},expression:\"vo.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"值\",\"prop\":\"value\"}},[_c('i-input',{model:{value:(_vm.vo.value),callback:function ($$v) {_vm.$set(_vm.vo, \"value\", $$v)},expression:\"vo.value\"}},[_c('span',{attrs:{\"slot\":\"prepend\"},slot:\"prepend\"},[_vm._v(\"b:\")])])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <Row :gutter=\"10\">\r\n            <i-col span=\"8\">\r\n                <Card>\r\n                    <div class=\"title\" slot=\"title\">\r\n                        <Tooltip max-width=\"200\" content=\"菜单权限由页面路由定义，不提供任何编辑功能，只能执行将权限数据同步到数据库的操作。\">\r\n                            <Tag color=\"green\">菜单</Tag>\r\n                            权限资源\r\n                        </Tooltip>\r\n                    </div>\r\n                    <div slot=\"extra\">\r\n                        <Tooltip content=\"同步\" v-permission.show=\"'b:perm:menu:sync'\" style=\"cursor: pointer;\">\r\n                            <Icon type=\"md-sync\" size=\"28\" @click=\"syncMenus\"></Icon>\r\n                        </Tooltip>\r\n                    </div>\r\n                    <Tree :data=\"menus\" :render=\"renderMenus\"></Tree>\r\n                </Card>\r\n            </i-col>\r\n            <i-col span=\"8\">\r\n                <Card>\r\n                    <div class=\"title\" slot=\"title\">\r\n                        <Tooltip max-width=\"200\" content=\"按钮权限是依附在菜单权限下的，这样能帮助您更好区分相似的按钮权限。\">\r\n                            <Tag color=\"orange\">按钮</Tag>\r\n                            权限资源\r\n                        </Tooltip>\r\n                    </div>\r\n                    <Tree :data=\"buttons\" :render=\"renderButtons\"></Tree>\r\n                </Card>\r\n            </i-col>\r\n            <i-col span=\"8\">\r\n                <Card>\r\n                    <div class=\"title\" slot=\"title\">\r\n                        <Tooltip max-width=\"200\" content=\"接口菜单权限由后台定义，不提供任何编辑功能，只能执行将权限数据同步到数据库的操作。\">\r\n                            <Tag color=\"blue\">接口</Tag>\r\n                            权限资源\r\n                        </Tooltip>\r\n                    </div>\r\n                    <div slot=\"extra\">\r\n                        <Tooltip content=\"同步\" v-permission.show=\"'b:perm:api:sync'\" style=\"cursor: pointer;\">\r\n                            <Icon type=\"md-sync\" size=\"28\" @click=\"syncApis\"></Icon>\r\n                        </Tooltip>\r\n                    </div>\r\n                    <Table :data=\"apis\" :columns=\"cols\" size=\"small\"></Table>\r\n                </Card>\r\n            </i-col>\r\n        </Row>\r\n        <Modal v-model=\"model\" :title=\"modelTitle\" :loading=\"loadingBtn\" @on-ok=\"addOrUpdate\" @on-cancel=\"cancel\">\r\n            <Form ref=\"form\" :model=\"vo\" :label-width=\"60\" :rules=\"validate\">\r\n                <Form-item label=\"名称\" prop=\"name\">\r\n                    <Input v-model=\"vo.name\" />\r\n                </Form-item>\r\n                <FormItem label=\"值\" prop=\"value\">\r\n                    <i-input v-model=\"vo.value\">\r\n                        <span slot=\"prepend\">b:</span>\r\n                    </i-input>\r\n                </FormItem>\r\n            </Form>\r\n        </Modal>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { menus } from '@/fx/router';\r\nimport { MakeTree } from '@/libs/common';\r\nimport ModelView from '@/mixins/model-view';\r\nimport { Tag } from 'iview';\r\nexport default {\r\n    name: 'Permission',\r\n    mixins: [ ModelView ],\r\n    data () {\r\n        return {\r\n            menus: [],\r\n            buttons: [],\r\n            apis: [],\r\n            vo: {\r\n                parent: null,\r\n                name: null,\r\n                value: null,\r\n                type: 2\r\n            },\r\n            validate: {\r\n                name: [{ required: true, trigger: 'blur', message: '名称不能为空' }],\r\n                value: [{ required: true, trigger: 'blur', message: '权限值不能为空' }]\r\n            },\r\n            cols: [{\r\n                title: '名称',\r\n                key: 'name'\r\n            }, {\r\n                title: '权限值',\r\n                key: 'value'\r\n            }],\r\n            addUrl: '/api/permission/add',\r\n            updateUrl: '/api/permission/update',\r\n            removeUrl: '/api/permission/remove'\r\n        };\r\n    },\r\n    computed: {\r\n        generateAddOrUpdate () {\r\n            return { ...this.vo, value: `b:${this.vo.value}` };\r\n        }\r\n    },\r\n    async created () {\r\n        const ms = menus();\r\n        ms.forEach(m => m.expand = true);\r\n        this.menus = ms;\r\n        await this.loadButtons();\r\n        await this.loadApis();\r\n    },\r\n    methods: {\r\n        async syncMenus () {\r\n            const result = await this.post('/api/permission/menu/sync', this.menus.reduce((ms, c) => ([ ...ms, ...c.children ]), []));\r\n            if (result.success) {\r\n                this.$Notice.success({ title: '同步成功' });\r\n                await this.loadButtons();\r\n            }\r\n        },\r\n        async syncApis () {\r\n            const result = await this.post('/api/permission/api/sync');\r\n            if (result.success) {\r\n                this.$Notice.success({ title: '同步成功' });\r\n            }\r\n        },\r\n        async doQuery () {\r\n            await this.loadButtons();\r\n        },\r\n        async loadApis () {\r\n            const result = await this.get('/api/permission/api/meta');\r\n            if (result.success) {\r\n                this.apis = result.value;\r\n            }\r\n        },\r\n        async loadButtons () {\r\n            const cache = this.cacheBtnExpand(this.buttons);\r\n            const result = await this.get('/api/permission/list');\r\n            if (result.success) {\r\n                let btns = result.value.filter(p => p.type !== 3);\r\n                btns.filter(b => cache.some(c => c === b.id)).forEach(b => b.expand = true);\r\n                btns = MakeTree(btns, 0, 'parent');\r\n                btns.forEach(b => b.expand = true);\r\n                this.buttons = btns;\r\n            }\r\n        },\r\n        cacheBtnExpand (data) {\r\n            const result = [];\r\n            if (data && data.length) {\r\n                data.forEach(d => {\r\n                    if (d.expand) {\r\n                        result.push(d.id);\r\n                    }\r\n                    if (d.children) {\r\n                        result.push(...this.cacheBtnExpand(d.children));\r\n                    }\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        renderMenus (h, { root, node, data }) {\r\n            return (\r\n                <span style=\"display:inline-block; width: 100%\">\r\n                    <span>{ data.name }</span>\r\n                    <span class=\"margin-left-10\" style=\"font-size: 14px; color: #909399\">{ data.value }</span>\r\n                </span>\r\n            );\r\n        },\r\n        renderButtons (h, { root, node, data }) {\r\n            return (\r\n                <span style=\"display:inline-block; width: 100%\">\r\n                    <span>{ data.name }</span>\r\n                    <span class=\"margin-left-10\" style=\"font-size: 14px; color: #909399\">{ data.value }</span>\r\n                    <Tag class=\"margin-left-10\" color={ data.type === 1 ? 'green' : 'orange' }>{ data.type === 1 ? '菜单' : '按钮' }</Tag>\r\n                    {data.type === 1 ? <i-button size=\"small\" class=\"margin-left-10 margin-right-5\" icon=\"md-add\" onClick={ () => this.addBtn(data) }></i-button> : ''}\r\n                    {data.type === 2 ? <i-button size=\"small\" class=\"margin-right-5\" icon=\"md-create\" onClick={ () => this.updateBtn(data) }></i-button> : ''}\r\n                    {data.type === 2 ? <i-button size=\"small\" icon=\"md-trash\" onClick={ () => this.remove(data) }></i-button> : ''}\r\n                </span>\r\n            );\r\n        },\r\n        addBtn (item) {\r\n            this.vo.parent = item.id;\r\n            this.add();\r\n        },\r\n        updateBtn (item) {\r\n            this.update(item);\r\n            if (this.vo.value.startsWith('b:')) {\r\n                this.vo.value = this.vo.value.substring(2);\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.title {\r\n    height: unset;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./permission.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./permission.vue?vue&type=template&id=3d2d2f9f&scoped=true&\"\nimport script from \"./permission.vue?vue&type=script&lang=js&\"\nexport * from \"./permission.vue?vue&type=script&lang=js&\"\nimport style0 from \"./permission.vue?vue&type=style&index=0&id=3d2d2f9f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d2d2f9f\",\n  null\n  \n)\n\ncomponent.options.__file = \"permission.vue\"\nexport default component.exports","// 26.1.9 Reflect.has(target, propertyKey)\nvar $export = require('./_export');\n\n$export($export.S, 'Reflect', {\n  has: function has(target, propertyKey) {\n    return propertyKey in target;\n  }\n});\n","module.exports = require(\"core-js/library/fn/reflect/has\");","export default {\r\n    data () {\r\n        return {\r\n            model: false,\r\n            vo: {\r\n                id: null\r\n            },\r\n            loadingBtn: false,\r\n            addTitle: '新增',\r\n            updateTitle: '修改'\r\n        };\r\n    },\r\n    computed: {\r\n        isUpdate () {\r\n            return this.vo.id !== null && this.vo.id !== undefined;\r\n        },\r\n        postUrl () {\r\n            return this.isUpdate ? this.updateUrl : this.addUrl;\r\n        },\r\n        modelTitle () {\r\n            return this.isUpdate ? this.updateTitle : this.addTitle;\r\n        },\r\n        generateAddOrUpdate () {\r\n            return { ...this.vo };\r\n        },\r\n        formRef () {\r\n            return 'form';\r\n        }\r\n    },\r\n    methods: {\r\n        generateRemove (item) {\r\n            return {};\r\n        },\r\n        async beforeAddOrUpdate () {},\r\n        async afterAddOrUpdate () {},\r\n        async doRequest () {\r\n            return this.post(this.postUrl, this.generateAddOrUpdate);\r\n        },\r\n        async addOrUpdate () {\r\n            const form = this.$refs[this.formRef];\r\n            (Array.isArray(form) ? form[0] : form).validate(async (valid) => {\r\n                if (valid) {\r\n                    await this.doAddOrUpdate();\r\n                } else {\r\n                    this.resetLoadingBtn();\r\n                    this.$Message.error('表单验证失败!');\r\n                }\r\n            });\r\n        },\r\n        async doAddOrUpdate () {\r\n            const before = await this.beforeAddOrUpdate();\r\n            let success = true;\r\n            let res;\r\n            if (before !== false) {\r\n                res = await this.doRequest();\r\n                ({ success } = res);\r\n            }\r\n            if (success === false) {\r\n                this.resetLoadingBtn();\r\n            } else {\r\n                this.model = false;\r\n                this._timeoutQuery();\r\n            }\r\n            await this.afterAddOrUpdate(success, res);\r\n            return success;\r\n        },\r\n        async beforeRemove (item) {\r\n            if (this.__removeUrl) {\r\n                this.removeUrl = this.__removeUrl;\r\n            } else {\r\n                this.__removeUrl = this.removeUrl;\r\n            }\r\n            this.removeUrl = `${this.removeUrl}/${item.id}`;\r\n        },\r\n        async afterRemove (success, item) {},\r\n        async remove (item) {\r\n            if (!item) return;\r\n            const before = await this.beforeRemove(item);\r\n            let success = true;\r\n            if (before !== false) {\r\n                const res = await this.post(this.removeUrl, this.generateRemove(item));\r\n                ({ success } = res);\r\n            }\r\n            if (success === false) {\r\n                this.resetLoadingBtn();\r\n            } else {\r\n                this._timeoutQuery();\r\n            }\r\n            await this.afterRemove(success, item);\r\n            return success;\r\n        },\r\n        add () {\r\n            this.model = true;\r\n            this.vScrollToTop();\r\n            this.loadingBtn = true;\r\n            this.$refs[this.formRef].resetFields();\r\n            this.vo.id = null;\r\n        },\r\n        update (item) {\r\n            this.model = true;\r\n            this.vScrollToTop();\r\n            this.loadingBtn = true;\r\n            Object.keys(this.vo).filter(key => Reflect.has(item, key)).forEach(key => this.vo[key] = item[key]);\r\n        },\r\n        vScrollToTop (ref = 'vScroll') {\r\n            if (this.$refs[ref]) {\r\n                this.$refs[ref].scrollTo({ x: 0, y: 0 });\r\n            }\r\n        },\r\n        cancel () {\r\n            this.loadingBtn = false;\r\n        },\r\n        resetLoadingBtn () {\r\n            this.loadingBtn = false;\r\n            this.$nextTick(() => this.loadingBtn = true);\r\n        },\r\n        _timeoutQuery () {\r\n            if (typeof this.doQuery === 'function') {\r\n                setTimeout(() => this.doQuery(), 500);\r\n            }\r\n        }\r\n    }\r\n};\r\n"],"sourceRoot":""}