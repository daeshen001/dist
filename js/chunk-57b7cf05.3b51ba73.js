(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57b7cf05"],{"05ca":function(e,t,r){r("d206"),e.exports=r("584a").Reflect.has},c058:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Tabs",{model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},e._l(e.list,function(t){return r("TabPane",{key:t.type,attrs:{name:"tab-"+t.type,label:t.name}},[r("Card",{staticStyle:{width:"600px"}},[e.isEdit?r("Form",{ref:"form-"+t.type,refInFor:!0,attrs:{model:e.modelVo,"label-width":80,rules:e.validate}},[1===e.vo.type?[r("Form-item",{attrs:{label:"应用ID",prop:"wx.appId"}},[r("Input",{model:{value:e.config.wx.appId,callback:function(t){e.$set(e.config.wx,"appId","string"===typeof t?t.trim():t)},expression:"config.wx.appId"}})],1),r("Form-item",{attrs:{label:"应用秘钥",prop:"wx.appSecret"}},[r("Input",{model:{value:e.config.wx.appSecret,callback:function(t){e.$set(e.config.wx,"appSecret","string"===typeof t?t.trim():t)},expression:"config.wx.appSecret"}})],1),r("Form-item",{attrs:{label:"商户号",prop:"wx.mchId"}},[r("Input",{model:{value:e.config.wx.mchId,callback:function(t){e.$set(e.config.wx,"mchId","string"===typeof t?t.trim():t)},expression:"config.wx.mchId"}})],1),r("Form-item",{attrs:{label:"商户密钥",prop:"wx.mchKey"}},[r("Input",{model:{value:e.config.wx.mchKey,callback:function(t){e.$set(e.config.wx,"mchKey","string"===typeof t?t.trim():t)},expression:"config.wx.mchKey"}})],1),r("Form-item",{attrs:{label:"证书P12",prop:"cert"}},[r("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"}},[r("Upload",{attrs:{"before-upload":e.handleCert,action:""}},[r("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[e._v("选择文件")])],1),e.cert?r("div",[e._v(e._s(e.cert.name))]):e._e()],1)])]:2===e.vo.type?[r("Form-item",{attrs:{label:"商户号",prop:"alipay.partner"}},[r("Input",{model:{value:e.config.alipay.partner,callback:function(t){e.$set(e.config.alipay,"partner","string"===typeof t?t.trim():t)},expression:"config.alipay.partner"}})],1),r("Form-item",{attrs:{label:"商户秘钥",prop:"alipay.key"}},[r("Input",{model:{value:e.config.alipay.key,callback:function(t){e.$set(e.config.alipay,"key","string"===typeof t?t.trim():t)},expression:"config.alipay.key"}})],1),r("Form-item",{attrs:{label:"卖家邮箱",prop:"alipay.sellerEmail"}},[r("Input",{model:{value:e.config.alipay.sellerEmail,callback:function(t){e.$set(e.config.alipay,"sellerEmail","string"===typeof t?t.trim():t)},expression:"config.alipay.sellerEmail"}})],1),r("Form-item",{attrs:{label:"应用ID",prop:"alipay.appId"}},[r("Input",{model:{value:e.config.alipay.appId,callback:function(t){e.$set(e.config.alipay,"appId","string"===typeof t?t.trim():t)},expression:"config.alipay.appId"}})],1),r("Form-item",{attrs:{label:"应用秘钥",prop:"alipay.privateKey"}},[r("Input",{model:{value:e.config.alipay.privateKey,callback:function(t){e.$set(e.config.alipay,"privateKey","string"===typeof t?t.trim():t)},expression:"config.alipay.privateKey"}})],1),r("Form-item",{attrs:{label:"应用公钥",prop:"alipay.alipayPublicKey"}},[r("Input",{model:{value:e.config.alipay.alipayPublicKey,callback:function(t){e.$set(e.config.alipay,"alipayPublicKey","string"===typeof t?t.trim():t)},expression:"config.alipay.alipayPublicKey"}})],1)]:e._e(),r("Row",{staticStyle:{"text-align":"center"}},[r("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.addOrUpdate}},[e._v("保存")]),r("Button",{attrs:{type:"dashed",loading:e.loadingBtn},on:{click:e.cancel}},[e._v("取消")])],1)],2):r("div",[1===t.type?r("CellGroup",[r("Cell",{attrs:{title:"应用ID",extra:t.appId}}),r("Cell",{attrs:{title:"应用秘钥",extra:t.appSecret}}),r("Cell",{attrs:{title:"商户号",extra:t.mchId}}),r("Cell",{attrs:{title:"商户密钥",extra:t.mchKey}})],1):e._e(),2===t.type?r("CellGroup",[r("Cell",{attrs:{title:"商户号",extra:t.partner}}),r("Cell",{attrs:{title:"商户秘钥",extra:t.key}}),r("Cell",{attrs:{title:"卖家邮箱",extra:t.sellerEmail}}),r("Cell",{attrs:{title:"应用ID",extra:t.appId}}),r("Cell",{attrs:{title:"应用秘钥",extra:t.privateKey}}),r("Cell",{attrs:{title:"支付宝应用公钥",extra:t.alipayPublicKey}})],1):e._e(),r("Row",{staticStyle:{"text-align":"center"}},[r("i-switch",{staticStyle:{"margin-right":"20px"},attrs:{size:"large",value:t.status,loading:e.loadingBtn},on:{"on-change":function(r){return e.status(t,r)}}},[r("span",{attrs:{slot:"open"},slot:"open"},[e._v("启用")]),r("span",{attrs:{slot:"close"},slot:"close"},[e._v("禁用")])]),r("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(r){e.edit(t)}}},[e._v(e._s(t.id?"修改":"新增"))]),r("Poptip",{attrs:{confirm:"",transfer:"",title:"确定删除该收款配置吗?"},on:{"on-ok":function(r){e.remove(t)}}},[r("Button",{attrs:{type:"dashed"}},[e._v("删除")])],1)],1)],1)],1)],1)}),1)],1)},i=[],a=(r("a481"),r("7f7f"),r("7514"),r("96cf"),r("3b8d")),o=r("f499"),s=r.n(o),l=r("cebc"),c=r("f600"),u=r("fbc3"),p={name:"PaymentConfig",mixins:[u["a"]],data:function(){return{PaymentConfigType:c["k"],list:[],vo:{type:null,json:null,cert:null},currentTab:null,isEdit:!1,cert:null,config:{wx:{appId:null,mchId:null,mchKey:null,appSecret:null},alipay:{partner:null,key:null,sellerEmail:null,appId:null,privateKey:null,alipayPublicKey:null}},validate:{"wx.appId":[{required:!0,trigger:"blur",message:"请填写应用ID"}],"wx.appSecret":[{required:!0,trigger:"blur",message:"请填写应用秘钥"}],"wx.mchId":[{required:!0,trigger:"blur",message:"请填写商户号"}],"wx.mchKey":[{required:!0,trigger:"blur",message:"请填写商户密钥"}],"wx.cert":[{required:!0,trigger:"change",message:"请选择微信证书P12文件"}],"alipay.partner":[{required:!0,trigger:"blur",message:"请填写商户号"}],"alipay.key":[{required:!0,trigger:"blur",message:"请填写商户密钥"}],"alipay.sellerEmail":[{required:!0,type:"email",trigger:"blur",message:"请填写卖家邮箱"}],"alipay.appId":[{required:!0,trigger:"blur",message:"请填写应用ID"}],"alipay.privateKey":[{required:!0,trigger:"blur",message:"请填写应用秘钥"}],"alipay.alipayPublicKey":[{required:!0,trigger:"blur",message:"请填写应用公钥"}]},addUrl:"/api/ep-payment-config/add",updateUrl:"/api/ep-payment-config/update",removeUrl:"/api/ep-payment-config/remove"}},computed:{formRef:function(){return"form-".concat(this.vo.type)},modelVo:function(){return Object(l["a"])({},this.vo,this.config)},generateAddOrUpdate:function(){return Object(l["a"])({},this.vo,{json:s()(1===this.vo.type?this.config.wx:this.config.alipay)})}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.doQuery();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{doQuery:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.get("/api/ep-payment-config/list");case 2:t=e.sent,r=t.success&&t.value||[],this.list=c["k"].map(function(e){var t=r.find(function(t){return t.type===e.id});return Object(l["a"])({},JSON.parse((null===t||void 0===t?void 0:t.json)||"{}"),t||{},{type:e.id,name:e.name})}),this.isEdit=!1,this.resetLoadingBtn();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),edit:function(e){e.id&&this.update(e),e.json&&(this.config[1===e.type?"wx":"alipay"]=JSON.parse(e.json)),this.resetLoadingBtn(),this.vo.type=e.type,this.isEdit=!0},cancel:function(){this.$super(u["a"]).cancel(),this.isEdit=!1},addOrUpdate:function(){this.loadingBtn=!0,this.$super(u["a"]).addOrUpdate()},status:function(e,t){this.update(e),e.json&&(this.config[1===e.type?"wx":"alipay"]=JSON.parse(e.json)),this.vo.status=t,this.doAddOrUpdate()},handleCert:function(e){var t=this,r=new FileReader;return r.onload=function(e){return t.vo.cert=e.target.result.replace(/data:.*;base64,/,"")},r.readAsDataURL(e),this.cert=e,!1},resetLoadingBtn:function(){this.loadingBtn=!1}}},d=p,f=(r("f4c5"),r("2877")),m=Object(f["a"])(d,n,i,!1,null,"2329662c",null);m.options.__file="payment-config.vue";t["default"]=m.exports},d206:function(e,t,r){var n=r("63b6");n(n.S,"Reflect",{has:function(e,t){return t in e}})},d557:function(e,t,r){},f4c5:function(e,t,r){"use strict";var n=r("d557"),i=r.n(n);i.a},fae4:function(e,t,r){e.exports=r("05ca")},fbc3:function(e,t,r){"use strict";var n=r("fae4"),i=r.n(n),a=r("a4bb"),o=r.n(a),s=(r("ac6a"),r("a745")),l=r.n(s),c=(r("96cf"),r("3b8d")),u=r("cebc");t["a"]={data:function(){return{model:!1,vo:{id:null},loadingBtn:!1,addTitle:"新增",updateTitle:"修改"}},computed:{isUpdate:function(){return null!==this.vo.id&&void 0!==this.vo.id},postUrl:function(){return this.isUpdate?this.updateUrl:this.addUrl},modelTitle:function(){return this.isUpdate?this.updateTitle:this.addTitle},generateAddOrUpdate:function(){return Object(u["a"])({},this.vo)},formRef:function(){return"form"}},methods:{generateRemove:function(e){return{}},beforeAddOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),afterAddOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doRequest:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post(this.postUrl,this.generateAddOrUpdate));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$refs[this.formRef],(l()(t)?t[0]:t).validate(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,r.doAddOrUpdate();case 3:e.next=7;break;case 5:r.resetLoadingBtn(),r.$Message.error("表单验证失败!");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doAddOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.beforeAddOrUpdate();case 2:if(t=e.sent,r=!0,!1===t){e.next=10;break}return e.next=7,this.doRequest();case 7:n=e.sent,i=n,r=i.success;case 10:return!1===r?this.resetLoadingBtn():(this.model=!1,this._timeoutQuery()),e.next=13,this.afterAddOrUpdate(r,n);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),beforeRemove:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.__removeUrl?this.removeUrl=this.__removeUrl:this.__removeUrl=this.removeUrl,this.removeUrl="".concat(this.removeUrl,"/").concat(t.id);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),afterRemove:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.beforeRemove(t);case 4:if(r=e.sent,n=!0,!1===r){e.next=11;break}return e.next=9,this.post(this.removeUrl,this.generateRemove(t));case 9:i=e.sent,n=i.success;case 11:return!1===n?this.resetLoadingBtn():this._timeoutQuery(),e.next=14,this.afterRemove(n,t);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),add:function(){this.model=!0,this.vScrollToTop(),this.loadingBtn=!0,this.$refs[this.formRef].resetFields(),this.vo.id=null},update:function(e){var t=this;this.model=!0,this.vScrollToTop(),this.loadingBtn=!0,o()(this.vo).filter(function(t){return i()(e,t)}).forEach(function(r){return t.vo[r]=e[r]})},vScrollToTop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vScroll";this.$refs[e]&&this.$refs[e].scrollTo({x:0,y:0})},cancel:function(){this.loadingBtn=!1},resetLoadingBtn:function(){var e=this;this.loadingBtn=!1,this.$nextTick(function(){return e.loadingBtn=!0})},_timeoutQuery:function(){var e=this;"function"===typeof this.doQuery&&setTimeout(function(){return e.doQuery()},500)}}}}}]);
//# sourceMappingURL=chunk-57b7cf05.3b51ba73.js.map