(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e750029"],{"05ca":function(t,e,a){a("d206"),t.exports=a("584a").Reflect.has},"20a9":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("Form",{ref:"vo",attrs:{model:t.vo,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"子产品名",prop:"name"}},[a("Input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入子产品"},model:{value:t.vo.name,callback:function(e){t.$set(t.vo,"name",e)},expression:"vo.name"}})],1),a("FormItem",{attrs:{label:"凭证配置",prop:"voucherId"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.vo.voucherId,callback:function(e){t.$set(t.vo,"voucherId",e)},expression:"vo.voucherId"}},t._l(t.voucherList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"success"}},[t._v("拉取产品")])],1),a("FormItem",{attrs:{label:"短信模板",prop:"voucherTemplate"}},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":t.smsChange},model:{value:t.vo.voucherTemplate,callback:function(e){t.$set(t.vo,"voucherTemplate",e)},expression:"vo.voucherTemplate"}},t._l(t.voucherTemplateList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.title))])}),1)],1),a("FormItem",{attrs:{label:"市场价",prop:"marketPrice"}},[a("InputNumber",{staticStyle:{width:"600px"},attrs:{min:0,formatter:function(t){return""+t/100},parser:function(t){return""+parseInt((100*t).toFixed(2))}},model:{value:t.vo.marketPrice,callback:function(e){t.$set(t.vo,"marketPrice",e)},expression:"vo.marketPrice"}})],1),a("FormItem",{attrs:{label:"团/散",prop:"ticketFlag"}},[a("RadioGroup",{model:{value:t.vo.ticketFlag,callback:function(e){t.$set(t.vo,"ticketFlag",e)},expression:"vo.ticketFlag"}},[a("Radio",{attrs:{label:2001}},[t._v("团")]),a("Radio",{attrs:{label:2002}},[t._v("散")])],1)],1),2001===t.vo.ticketFlag?a("FormItem",{attrs:{label:"最低购买数",prop:"ticketFlag"}},[a("InputNumber",{staticStyle:{width:"600px"},attrs:{min:1},model:{value:t.vo.minBuyQuantity,callback:function(e){t.$set(t.vo,"minBuyQuantity",e)},expression:"vo.minBuyQuantity"}})],1):t._e(),2002===t.vo.ticketFlag?a("FormItem",{attrs:{label:"最高购买数",prop:"ticketFlag"}},[a("InputNumber",{staticStyle:{width:"600px"},attrs:{min:1},model:{value:t.vo.maxBuyQuantity,callback:function(e){t.$set(t.vo,"maxBuyQuantity",e)},expression:"vo.maxBuyQuantity"}})],1):t._e(),a("FormItem",{attrs:{label:"成人/儿童",prop:"ticketDict"}},[a("RadioGroup",{model:{value:t.vo.ticketDict,callback:function(e){t.$set(t.vo,"ticketDict",e)},expression:"vo.ticketDict"}},[a("Radio",{attrs:{label:3001}},[t._v("成人")]),a("Radio",{attrs:{label:3002}},[t._v("儿童")])],1)],1),a("FormItem",{attrs:{label:"实名制",prop:"realName"}},[a("RadioGroup",{model:{value:t.vo.realName,callback:function(e){t.$set(t.vo,"realName",e)},expression:"vo.realName"}},[a("Radio",{attrs:{label:1}},[t._v("是")]),a("Radio",{attrs:{label:0}},[t._v("否")])],1)],1),"1"===t.vo.realName?a("FormItem",{attrs:{label:"身份证次数限制"}},[t._v("一张身份证一天内购买\n            "),a("InputNumber",{staticStyle:{width:"3%"},attrs:{min:1},model:{value:t.vo.sidDayCount,callback:function(e){t.$set(t.vo,"sidDayCount",e)},expression:"vo.sidDayCount"}}),t._v("次，0表示不限次数，每日最多购买\n            "),a("InputNumber",{staticStyle:{width:"3%"},attrs:{min:1},model:{value:t.vo.sidDayQuantity,callback:function(e){t.$set(t.vo,"sidDayQuantity",e)},expression:"vo.sidDayQuantity"}}),t._v("/张，0表示不限张数\n        ")],1):t._e(),a("FormItem",{attrs:{label:"预定须知",prop:"bookNotes"}},[a("Input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入使用须知"},model:{value:t.vo.bookNotes,callback:function(e){t.$set(t.vo,"bookNotes",e)},expression:"vo.bookNotes"}})],1),a("FormItem",{attrs:{label:"使用须知",prop:"useNotes"}},[a("Input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入预定须知"},model:{value:t.vo.userNotes,callback:function(e){t.$set(t.vo,"userNotes",e)},expression:"vo.userNotes"}})],1),a("FormItem",{attrs:{label:"图片",prop:"imgs"}},[a("OssUpload",{attrs:{files:t.imgs,size:5,format:["jpg","jpeg","png"],accept:"image/*"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("vo")}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){e.preventDefault(),t.$router.go(-1)}}},[t._v("返回")])],1)],1)],1)},o=[],n=a("5d73"),i=a.n(n),s=(a("b54a"),a("fae4")),l=a.n(s),u=a("a4bb"),c=a.n(u),m=(a("ac6a"),a("96cf"),a("3b8d")),p=(a("c5f6"),a("7f7f"),a("f499")),v=a.n(p),d=a("cebc"),h=a("9dac"),f=a("8f0c"),b={name:"TicketUpdate",components:{OssUpload:h["a"]},data:function(){return{productName:null,voucherList:[],voucherTemplateList:[],vo:{id:null,productId:null,maId:null,voucherId:null,name:null,ticketFlag:null,ticketDict:null,marketPrice:null,minPrice:null,settlePrice:null,sidDayCount:null,sidDayQuantity:null,minBuyQuantity:null,maxBuyQuantity:null,lowUseQuantity:null,realName:null,bookNotes:null,userNotes:null,imgs:null,voucherMsg:null,voucherTemplate:null,ticketMsg:null},imgs:[],ruleValidate:{name:[{required:!0,message:"子产品名不能为空"},{trigger:"blur",validator:null}],maId:[{required:!0,message:"码id不能为空",trigger:"blur"}],marketPrice:[{required:!0,message:"请输入市场价"}],settlePrice:[{required:!0,message:"请输入结算价"}],minPrice:[{required:!0,message:"请输入最低价格"}],ticketDict:[{required:!0,message:"请选择成人儿童类型"}],ticketFlag:[{required:!0,message:"请选择团散类型"}],realName:[{required:!0,message:"是否实名制"}]}}},computed:{generateAddOrUpdate:function(){return Object(d["a"])({},this.vo,{imgs:v()(this.imgs.map(function(t){return{link:t.name}})),ticketDict:Number(this.vo.ticketDict),ticketFlag:Number(this.vo.ticketFlag),realName:Number(this.vo.realName)})}},mounted:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(){var e,a,r,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return c()(this.vo).filter(function(t){return l()(o.$route.params.productSub,t)}).forEach(function(t){return o.vo[t]=o.$route.params.productSub[t]}),this.vo.realName=this.vo.realName?1:0,this.vo.imgs&&(e=JSON.parse(this.vo.imgs),this.imgs=e.map(function(t){return{name:t.link,status:!0}})),this.vo.productId=this.$route.params.productId,this.productName=this.$route.params.productName,t.next=7,this.get("/api/setting/fxma/list");case 7:return a=t.sent,a.success&&(this.voucherList=a.value),t.next=11,this.get("api/sms-template/list",{type:2});case 11:r=t.sent,r.success&&(this.voucherTemplateList=r.value);case 13:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{handleSubmit:function(){var t=Object(m["a"])(regeneratorRuntime.mark(function t(e){var a,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.vo.validate();case 2:if(a=t.sent,!a){t.next=10;break}return t.next=6,this.post("/api/product/scenic/sub/update",this.generateAddOrUpdate);case 6:r=t.sent,r.success&&(this.$Notice.success({title:"修改子产品成功"}),f["a"].$emit("scenery-update"),this.$router.push("/product/scenery")),t.next=11;break;case 10:this.$Message.error("表单验证失败");case 11:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),smsChange:function(t){console.log(1111);var e=!0,a=!1,r=void 0;try{for(var o,n=i()(this.voucherTemplateList);!(e=(o=n.next()).done);e=!0){var s=o.value;console.log(s),s.id===t&&(this.vo.voucherMsg=s.content)}}catch(l){a=!0,r=l}finally{try{e||null==n.return||n.return()}finally{if(a)throw r}}},parseNumber:function(t){return console.log(t),1}}},g=b,k=a("2877"),y=Object(k["a"])(g,r,o,!1,null,null,null);y.options.__file="ticket-update.vue";e["default"]=y.exports},"386b":function(t,e,a){var r=a("5ca1"),o=a("79e5"),n=a("be13"),i=/"/g,s=function(t,e,a,r){var o=String(n(t)),s="<"+e;return""!==a&&(s+=" "+a+'="'+String(r).replace(i,"&quot;")+'"'),s+">"+o+"</"+e+">"};t.exports=function(t,e){var a={};a[t]=e(s),r(r.P+r.F*o(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",a)}},"8f0c":function(t,e,a){"use strict";var r=a("2b0e");e["a"]=new r["default"]},b54a:function(t,e,a){"use strict";a("386b")("link",function(t){return function(e){return t(this,"a","href",e)}})},d206:function(t,e,a){var r=a("63b6");r(r.S,"Reflect",{has:function(t,e){return e in t}})},fae4:function(t,e,a){t.exports=a("05ca")}}]);
//# sourceMappingURL=chunk-2e750029.b3a8b84d.js.map