(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0b831e0"],{"05ca":function(t,e,n){n("d206"),t.exports=n("584a").Reflect.has},"08fd":function(t,e,n){"use strict";var r=n("6f51"),i=n.n(r);i.a},"62f2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{gutter:10}},[n("i-col",{attrs:{span:"8"}},[n("Card",[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[n("Tooltip",{attrs:{"max-width":"200",content:"菜单权限由页面路由定义，不提供任何编辑功能，只能执行将权限数据同步到数据库的操作。"}},[n("Tag",{attrs:{color:"green"}},[t._v("菜单")]),t._v("\n                        权限资源\n                    ")],1)],1),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("Tooltip",{directives:[{name:"permission",rawName:"v-permission.show",value:"b:perm:menu:sync",expression:"'b:perm:menu:sync'",modifiers:{show:!0}}],staticStyle:{cursor:"pointer"},attrs:{content:"同步"}},[n("Icon",{attrs:{type:"md-sync",size:"28"},on:{click:t.syncMenus}})],1)],1),n("Tree",{attrs:{data:t.menus,render:t.renderMenus}})],1)],1),n("i-col",{attrs:{span:"8"}},[n("Card",[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[n("Tooltip",{attrs:{"max-width":"200",content:"按钮权限是依附在菜单权限下的，这样能帮助您更好区分相似的按钮权限。"}},[n("Tag",{attrs:{color:"orange"}},[t._v("按钮")]),t._v("\n                        权限资源\n                    ")],1)],1),n("Tree",{attrs:{data:t.buttons,render:t.renderButtons}})],1)],1),n("i-col",{attrs:{span:"8"}},[n("Card",[n("div",{staticClass:"title",attrs:{slot:"title"},slot:"title"},[n("Tooltip",{attrs:{"max-width":"200",content:"接口菜单权限由后台定义，不提供任何编辑功能，只能执行将权限数据同步到数据库的操作。"}},[n("Tag",{attrs:{color:"blue"}},[t._v("接口")]),t._v("\n                        权限资源\n                    ")],1)],1),n("div",{attrs:{slot:"extra"},slot:"extra"},[n("Tooltip",{directives:[{name:"permission",rawName:"v-permission.show",value:"b:perm:api:sync",expression:"'b:perm:api:sync'",modifiers:{show:!0}}],staticStyle:{cursor:"pointer"},attrs:{content:"同步"}},[n("Icon",{attrs:{type:"md-sync",size:"28"},on:{click:t.syncApis}})],1)],1),n("Table",{attrs:{data:t.apis,columns:t.cols,size:"small"}})],1)],1)],1),n("Modal",{attrs:{title:t.modelTitle,loading:t.loadingBtn},on:{"on-ok":t.addOrUpdate,"on-cancel":t.cancel},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[n("Form",{ref:"form",attrs:{model:t.vo,"label-width":60,rules:t.validate}},[n("Form-item",{attrs:{label:"名称",prop:"name"}},[n("Input",{model:{value:t.vo.name,callback:function(e){t.$set(t.vo,"name",e)},expression:"vo.name"}})],1),n("FormItem",{attrs:{label:"值",prop:"value"}},[n("i-input",{model:{value:t.vo.value,callback:function(e){t.$set(t.vo,"value",e)},expression:"vo.value"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("b:")])])],1)],1)],1)],1)},i=[],a=(n("f559"),n("7f7f"),n("75fc")),s=(n("ac6a"),n("96cf"),n("3b8d")),o=n("cebc"),u=n("5131"),c=n("88ec"),l=n("fbc3"),p=n("e069"),d={name:"Permission",mixins:[l["a"]],data:function(){return{menus:[],buttons:[],apis:[],vo:{parent:null,name:null,value:null,type:2},validate:{name:[{required:!0,trigger:"blur",message:"名称不能为空"}],value:[{required:!0,trigger:"blur",message:"权限值不能为空"}]},cols:[{title:"名称",key:"name"},{title:"权限值",key:"value"}],addUrl:"/api/permission/add",updateUrl:"/api/permission/update",removeUrl:"/api/permission/remove"}},computed:{generateAddOrUpdate:function(){return Object(o["a"])({},this.vo,{value:"b:".concat(this.vo.value)})}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=Object(u["b"])(),e.forEach(function(t){return t.expand=!0}),this.menus=e,t.next=5,this.loadButtons();case 5:return t.next=7,this.loadApis();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{syncMenus:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.post("/api/permission/menu/sync",this.menus.reduce(function(t,e){return[].concat(Object(a["a"])(t),Object(a["a"])(e.children))},[]));case 2:if(e=t.sent,!e.success){t.next=7;break}return this.$Notice.success({title:"同步成功"}),t.next=7,this.loadButtons();case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),syncApis:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.post("/api/permission/api/sync");case 2:e=t.sent,e.success&&this.$Notice.success({title:"同步成功"});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),doQuery:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.loadButtons();case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadApis:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get("/api/permission/api/meta");case 2:e=t.sent,e.success&&(this.apis=e.value);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadButtons:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.cacheBtnExpand(this.buttons),t.next=3,this.get("/api/permission/list");case 3:n=t.sent,n.success&&(r=n.value.filter(function(t){return 3!==t.type}),r.filter(function(t){return e.some(function(e){return e===t.id})}).forEach(function(t){return t.expand=!0}),r=Object(c["e"])(r,0,"parent"),r.forEach(function(t){return t.expand=!0}),this.buttons=r);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cacheBtnExpand:function(t){var e=this,n=[];return t&&t.length&&t.forEach(function(t){t.expand&&n.push(t.id),t.children&&n.push.apply(n,Object(a["a"])(e.cacheBtnExpand(t.children)))}),n},renderMenus:function(t,e){e.root,e.node;var n=e.data;return t("span",{style:"display:inline-block; width: 100%"},[t("span",[n.name]),t("span",{class:"margin-left-10",style:"font-size: 14px; color: #909399"},[n.value])])},renderButtons:function(t,e){var n=this,r=(e.root,e.node,e.data);return t("span",{style:"display:inline-block; width: 100%"},[t("span",[r.name]),t("span",{class:"margin-left-10",style:"font-size: 14px; color: #909399"},[r.value]),t(p["Tag"],{class:"margin-left-10",attrs:{color:1===r.type?"green":"orange"}},[1===r.type?"菜单":"按钮"]),1===r.type?t("i-button",{attrs:{size:"small",icon:"md-add"},class:"margin-left-10 margin-right-5",on:{click:function(){return n.addBtn(r)}}}):"",2===r.type?t("i-button",{attrs:{size:"small",icon:"md-create"},class:"margin-right-5",on:{click:function(){return n.updateBtn(r)}}}):"",2===r.type?t("i-button",{attrs:{size:"small",icon:"md-trash"},on:{click:function(){return n.remove(r)}}}):""])},addBtn:function(t){this.vo.parent=t.id,this.add()},updateBtn:function(t){this.update(t),this.vo.value.startsWith("b:")&&(this.vo.value=this.vo.value.substring(2))}}},h=d,f=(n("08fd"),n("2877")),m=Object(f["a"])(h,r,i,!1,null,"3d2d2f9f",null);m.options.__file="permission.vue";e["default"]=m.exports},"6f51":function(t,e,n){},d206:function(t,e,n){var r=n("63b6");r(r.S,"Reflect",{has:function(t,e){return e in t}})},fae4:function(t,e,n){t.exports=n("05ca")},fbc3:function(t,e,n){"use strict";var r=n("fae4"),i=n.n(r),a=n("a4bb"),s=n.n(a),o=(n("ac6a"),n("a745")),u=n.n(o),c=(n("96cf"),n("3b8d")),l=n("cebc");e["a"]={data:function(){return{model:!1,vo:{id:null},loadingBtn:!1,addTitle:"新增",updateTitle:"修改"}},computed:{isUpdate:function(){return null!==this.vo.id&&void 0!==this.vo.id},postUrl:function(){return this.isUpdate?this.updateUrl:this.addUrl},modelTitle:function(){return this.isUpdate?this.updateTitle:this.addTitle},generateAddOrUpdate:function(){return Object(l["a"])({},this.vo)},formRef:function(){return"form"}},methods:{generateRemove:function(t){return{}},beforeAddOrUpdate:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),afterAddOrUpdate:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),doRequest:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.post(this.postUrl,this.generateAddOrUpdate));case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),addOrUpdate:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this.$refs[this.formRef],(u()(e)?e[0]:e).validate(function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}return t.next=3,n.doAddOrUpdate();case 3:t.next=7;break;case 5:n.resetLoadingBtn(),n.$Message.error("表单验证失败!");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),doAddOrUpdate:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e,n,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.beforeAddOrUpdate();case 2:if(e=t.sent,n=!0,!1===e){t.next=10;break}return t.next=7,this.doRequest();case 7:r=t.sent,i=r,n=i.success;case 10:return!1===n?this.resetLoadingBtn():(this.model=!1,this._timeoutQuery()),t.next=13,this.afterAddOrUpdate(n,r);case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),beforeRemove:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.__removeUrl?this.removeUrl=this.__removeUrl:this.__removeUrl=this.removeUrl,this.removeUrl="".concat(this.removeUrl,"/").concat(e.id);case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),afterRemove:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));function e(e,n){return t.apply(this,arguments)}return e}(),remove:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.beforeRemove(e);case 4:if(n=t.sent,r=!0,!1===n){t.next=11;break}return t.next=9,this.post(this.removeUrl,this.generateRemove(e));case 9:i=t.sent,r=i.success;case 11:return!1===r?this.resetLoadingBtn():this._timeoutQuery(),t.next=14,this.afterRemove(r,e);case 14:return t.abrupt("return",r);case 15:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),add:function(){this.model=!0,this.vScrollToTop(),this.loadingBtn=!0,this.$refs[this.formRef].resetFields(),this.vo.id=null},update:function(t){var e=this;this.model=!0,this.vScrollToTop(),this.loadingBtn=!0,s()(this.vo).filter(function(e){return i()(t,e)}).forEach(function(n){return e.vo[n]=t[n]})},vScrollToTop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vScroll";this.$refs[t]&&this.$refs[t].scrollTo({x:0,y:0})},cancel:function(){this.loadingBtn=!1},resetLoadingBtn:function(){var t=this;this.loadingBtn=!1,this.$nextTick(function(){return t.loadingBtn=!0})},_timeoutQuery:function(){var t=this;"function"===typeof this.doQuery&&setTimeout(function(){return t.doQuery()},500)}}}}}]);
//# sourceMappingURL=chunk-f0b831e0.dd650c0b.js.map