(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67a8f425"],{"05ca":function(e,t,n){n("d206"),e.exports=n("584a").Reflect.has},"32d8":function(e,t,n){e.exports=n("a222")},"386b":function(e,t,n){var r=n("5ca1"),a=n("79e5"),i=n("be13"),o=/"/g,s=function(e,t,n,r){var a=String(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(o,"&quot;")+'"'),s+">"+a+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(s),r(r.P+r.F*a(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},"850c":function(e,t,n){"use strict";var r=n("63b6"),a=n("20fd");r(r.S+r.F*n("294c")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);while(t>e)a(n,e,arguments[e++]);return n.length=t,n}})},"8f0c":function(e,t,n){"use strict";var r=n("2b0e");t["a"]=new r["default"]},"92fa":function(e,t){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function r(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}}e.exports=function(e){return e.reduce(function(e,t){var a,i,o,s,u;for(o in t)if(a=e[o],i=t[o],a&&n.test(o))if("class"===o&&("string"===typeof a&&(u=a,e[o]=a={},a[u]=!0),"string"===typeof i&&(u=i,t[o]=i={},i[u]=!0)),"on"===o||"nativeOn"===o||"hook"===o)for(s in i)a[s]=r(a[s],i[s]);else if(Array.isArray(a))e[o]=a.concat(i);else if(Array.isArray(i))e[o]=[a].concat(i);else for(s in i)a[s]=i[s];else e[o]=t[o];return e},{})}},"944f":function(e,t,n){"use strict";var r=n("cbd4"),a=n.n(r);a.a},"9a3e":function(e,t,n){"use strict";var r,a,i=n("92fa"),o=n.n(i),s=n("d656"),u=n.n(s),c=n("32d8"),l=n.n(c),p=n("a745"),d=n.n(p),f=n("bd86"),h=(n("7f7f"),n("c5f6"),n("88ec")),m=n("f600"),v=n("e069"),b=n.n(v),g=n("da81"),y=n.n(g),w=(n("96cf"),n("3b8d")),x={name:"PoptipTable",props:{name:{type:[String,Function,Number],default:""},columns:{type:Array,required:!0},handler:{type:Function,required:!0},cache:{type:Boolean,default:!0},params:{type:Object},gutter:{type:Number,default:0},config:{type:Object}},data:function(){return{data:{},show:!1,isLoad:!1}},methods:{showHandler:function(){var e=Object(w["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isLoad&&this.cache){e.next=7;break}return this.show=!1,e.next=4,this.handler(this.params);case 4:this.data=e.sent,this.isLoad=!0,this.show=!0;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),columnValue:function(e){var t=this.data[e.key];return"function"===typeof e.convert&&(t=e.convert(t,this.data,e)),t}},render:function(e,t){var n=this;return e(b.a.Poptip,o()([this.config,{on:{"on-popper-show":this.showHandler}}]),["function"===typeof this.name?this.name(e):e("a",[this.name]),this.show?e("div",{slot:"content",style:this.config.props.wordWrap?"word-wrap: break-word":""},[this.columns.map(function(t,r){return e("div",[e(b.a.Row,{key:r,attrs:{gutter:n.gutter}},[e("i-col",{attrs:{className:t.titleClass,span:t.labelSpan||24-(t.valueSpan||12)}},["function"===typeof t.titleRender?t.titleRender(e,{row:n.data,column:t},t.title):t.title]),e("i-col",{attrs:{className:t.valueClass,span:t.valueSpan||24-(t.labelSpan||12)}},["function"===typeof t.render?t.render(e,{row:n.data,column:t},n.columnValue(t)):n.columnValue(t)])]),e(b.a.Divider,{style:"margin: 5px 0;"})])})]):e(b.a.Spin,{slot:"content",attrs:{fix:!0}})])}},k=x,R=n("2877"),O=Object(R["a"])(k,r,a,!1,null,null,null);O.options.__file="poptip-table.vue";var _=O.exports;t["a"]={methods:{renderDate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return this.renderDateFormat(e,t,n)()},renderDateFormat:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return function(r){return e("span",Object(h["a"])(n(t.row[t.column.key]),r))}},renderDateRange:function(e,t){return function(n,r){return e("span","".concat(Object(h["a"])(t.row[n]),"~").concat(Object(h["a"])(t.row[r])))}},renderAppend:function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e("span","".concat(r(t.row[t.column.key])).concat(n))}},renderSuAppend:function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return e("span","".concat(n).concat(r(t.row[t.column.key])))}},renderStatus:function(e,t){return this.renderStatusDiy(e,t)()},renderMoney:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e("span",[e(b.a.Icon,{style:"position: relative; top: -1px;",attrs:{type:"logo-yen"}}),Object(h["c"])(Number(n(t.row[t.column.key])))])},renderMoneyFour:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return e("span",[e(b.a.Icon,{style:"position: relative; top: -1px;",attrs:{type:"logo-yen"}}),Object(h["d"])(Number(n(t.row[t.column.key])))])},renderStatusDiy:function(e,t){var n=t.row[t.column.key];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"启用",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"禁用",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return n=a(n),e(b.a.Tag,{attrs:{type:"dot",color:!0===n?"success":"error"}},[!0===n?t:r])}},renderStatusDic:function(e,t){var n=t.row[t.column.key];return function(t,r){return e(b.a.Tag,{attrs:{type:"border",color:t[n]}},[Object(m["t"])(r,n).name])}},renderDic:function(e,t){return function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{field:"id",value:"name"};return e("span",Object(m["t"])(n,t.row[t.column.key],Object(f["a"])({},r.value,""),r.field)[r.value])}},renderListPop:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=n(t.row[t.column.key]);return r=d()(r)?r:l()(r),e(b.a.Poptip,{attrs:{trigger:"hover",placement:"bottom"}},[e(b.a.Tag,[r.length]),e("div",{slot:"content"},[e("ul",[r.map(function(t){return e("li",{style:"text-align: center; padding: 4px;"},[t])})])])])},renderPopTable:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t.row[t.column.key];r=y()({params:{value:a,params:t},poptip:{transfer:!0,wordWrap:!0}},r);var i=r.poptip;return u()(r,"poptip"),function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return t.row},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return e(_,o()([{props:r},{attrs:{name:u,columns:n,handler:s,config:{props:i}}}]))}},renderJoin:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/";return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e("span",a.map(function(e){return t.row[e]}).join(n))}},renderLink:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};return e("a",{on:{click:n}},[r(t.row[t.column.key])])},renderBtnPop:function(e,t,n,r,a){return!1===a.show?null:e(b.a.Poptip,{attrs:{confirm:!0,title:t,placement:"top",transfer:!0},on:{"on-ok":r}},[e(b.a.Button,y()({props:{size:"small"}},a),[n])])},renderActions:function(e,t,n){var r=this,a=n.every(function(e){var t;return!1===(null===(t=e.config)||void 0===t?void 0:t.show)});return a?e("div",["无可用操作"]):n.map(function(t){var n=t.config,a=void 0===n?{}:n,i=t.text,s=t.click,u={props:a,style:a.style};switch(t.type){case"delete":var c=t.title,l=void 0===c?"您确定要删除这条数据吗？":c;return r.renderBtnPop(e,l,i||"删除",s,y()({props:{type:"error"}},u));case"switch":var p=t.falseText,d=void 0===p?"禁用":p,f=t.trueText,h=void 0===f?"启用":f,m=t.bool,v=m?d:h,g=m?"warning":"success";return r.renderBtnPop(e,"您确定要".concat(v,"这条数据吗?"),v,s,y()({props:{type:g}},u));case"resetPassword":var w=t.epName;return r.renderBtnPop(e,"您确定要重置".concat(w,"管理员的密码吗?"),i||"重置密码",s,y()({props:{type:"primary"}},u));default:return!1===a.show?null:e(b.a.Button,o()([y()({props:{size:"small",type:"primary"}},u),{on:{click:s}}]),[i])}})}}}},a222:function(e,t,n){n("850c"),e.exports=n("584a").Array.of},a465:function(e,t,n){var r=n("63b6"),a=n("bf0b").f,i=n("e4ae");r(r.S,"Reflect",{deleteProperty:function(e,t){var n=a(i(e),t);return!(n&&!n.configurable)&&delete e[t]}})},a577:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Row",[n("Button",{attrs:{type:"primary"},on:{click:e.add}},[n("Icon",{attrs:{type:"plus"}}),e._v("新增景点\n        ")],1)],1),n("Row",{staticClass:"margin-top-10"},[n("label",{staticStyle:{"margin-right":"8px"}},[e._v("主产品名称：")]),n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"",clearable:""},model:{value:e.table.query.name,callback:function(t){e.$set(e.table.query,"name",t)},expression:"table.query.name"}}),n("label",{staticStyle:{"margin-left":"10px"}},[e._v("子产品名称：")]),n("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"",clearable:""},model:{value:e.table.query.subName,callback:function(t){e.$set(e.table.query,"subName",t)},expression:"table.query.subName"}}),n("Button",{staticClass:"margin-left-10",attrs:{type:"primary",icon:"md-search"},on:{click:e.doQuery}},[e._v("搜索")])],1),n("Row",{staticClass:"margin-top-10"},[n("Table",{attrs:{columns:e.table.cols,data:e.table.data}}),n("i-col",[n("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[n("div",{staticStyle:{float:"right"}},[n("Page",{attrs:{total:e.table.total,"show-sizer":!0,placement:"top"},on:{"on-page-size-change":e.changePageSize,"on-change":e.changePage}})],1)])])],1),n("Modal",{attrs:{"mask-closable":!1,title:e.modelTitle,loading:e.loadingBtn},on:{"on-ok":e.addOrUpdate,"on-cancel":e.cancel},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},[n("div",{staticStyle:{}},[n("Form",{ref:"form",attrs:{model:e.vo,rules:e.ruleValidate,"label-width":80}},[n("FormItem",{attrs:{label:"产品名",prop:"name"}},[n("Input",{attrs:{placeholder:"请填写产品名，一旦填写不可修改"},model:{value:e.vo.name,callback:function(t){e.$set(e.vo,"name",t)},expression:"vo.name"}})],1),n("FormItem",{attrs:{label:"省市县",prop:"pcastr"}},[n("al-cascader",{ref:"pcastr",attrs:{level:2},model:{value:e.pcastr,callback:function(t){e.pcastr=t},expression:"pcastr"}})],1),n("FormItem",{attrs:{label:"景点级别",prop:"level"}},[n("Select",{attrs:{placeholder:"选取景点级别"},model:{value:e.vo.level,callback:function(t){e.$set(e.vo,"level",t)},expression:"vo.level"}},[n("Option",{attrs:{value:5}},[e._v("AAAAA")]),n("Option",{attrs:{value:4}},[e._v("AAAA")]),n("Option",{attrs:{value:3}},[e._v("AAA")]),n("Option",{attrs:{value:2}},[e._v("AA")]),n("Option",{attrs:{value:1}},[e._v("A")]),n("Option",{attrs:{value:0}},[e._v("无级别")])],1)],1),n("FormItem",{attrs:{label:"详细地址",prop:"adress"}},[n("Input",{attrs:{placeholder:"景点详细地址"},model:{value:e.vo.adress,callback:function(t){e.$set(e.vo,"adress",t)},expression:"vo.adress"}})],1),n("FormItem",{attrs:{label:"服务电话",prop:"tel"}},[n("Input",{attrs:{placeholder:"例如：0731-5264251"},model:{value:e.vo.tel,callback:function(t){e.$set(e.vo,"tel",t)},expression:"vo.tel"}})],1),n("FormItem",{attrs:{label:"营业时间",prop:"businessTime"}},[n("Input",{attrs:{placeholder:"例如：8：30-17:30"},model:{value:e.vo.business_time,callback:function(t){e.$set(e.vo,"business_time",t)},expression:"vo.business_time"}})],1),n("FormItem",{attrs:{label:"交通路线",prop:"transitLine"}},[n("Input",{attrs:{placeholder:"例如：地铁2号线——>公交"},model:{value:e.vo.transitLine,callback:function(t){e.$set(e.vo,"transitLine",t)},expression:"vo.transitLine"}})],1),n("FormItem",{attrs:{label:"景点介绍",prop:"blurb"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},placeholder:"描写景点特征"},model:{value:e.vo.blurb,callback:function(t){e.$set(e.vo,"blurb",t)},expression:"vo.blurb"}})],1),n("FormItem",{attrs:{label:"图片",prop:"imgs"}},[n("OssUpload",{attrs:{files:e.imgs,size:5,format:["jpg","jpeg","png"],accept:"image/*"}})],1)],1)],1)])],1)},a=[],i=(n("ed50"),n("6b54"),n("b54a"),n("96cf"),n("3b8d")),o=n("f499"),s=n.n(o),u=(n("7f7f"),n("cebc")),c=n("a7ee"),l=n("9a3e"),p=n("fbc3"),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Table",{attrs:{border:"",columns:e.cols,data:e.rows},scopedSlots:e._u([{key:"operation",fn:function(t){var r=t.row;return[n("div",[n("Dropdown",{attrs:{transfer:""},on:{"on-click":function(t){e.clickOperation(t,r)}}},[n("Button",{attrs:{type:"primary"}},[e._v("操作\n                        "),n("Icon",{attrs:{type:"ios-arrow-down"}})],1),n("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[r.status?n("DropdownItem",{attrs:{name:"down"}},[e._v("下架")]):e._e(),r.status?e._e():n("DropdownItem",{attrs:{name:"up"}},[e._v("上架")]),n("DropdownItem",{attrs:{name:"addplan"}},[e._v("增加销售计划")]),n("DropdownItem",{attrs:{name:"plan"}},[e._v("销售计划")]),r.status?e._e():n("DropdownItem",{attrs:{name:"delete"}},[e._v("删除")]),r.status?e._e():n("DropdownItem",{attrs:{name:"modify"}},[e._v("修改")])],1)],1)],1)]}}])})],1)},f=[],h={mixins:[l["a"]],props:{rows:Array},data:function(){this.$createElement;return{cols:[{title:"票据名称",key:"name"},{title:"市场价",key:"marketPrice",render:this.renderMoney},{title:"票种",key:"ticketDict",render:function(e,t){return e("span",[3001===t.row.ticketDict?"散客票":"团队票"])}},{title:"状态",key:"status",render:this.renderStatus},{title:"操作时间",key:"operateTime",render:this.renderDate},{title:"操作",slot:"operation"}]}},methods:{clickOperation:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("up"!==t){e.next=7;break}return e.next=3,this.post("/api/product/scenic/sub/upordown",{id:n.id,status:!0});case 3:r=e.sent,r.success&&(this.$Notice.success({title:"上架成功"}),this.$emit("on-query")),e.next=30;break;case 7:if("down"!==t){e.next=14;break}return e.next=10,this.post("/api/product/scenic/sub/upordown",{id:n.id,status:!1});case 10:a=e.sent,a.success&&(this.$Notice.success({title:"下架成功"}),this.$emit("on-query")),e.next=30;break;case 14:if("addplan"!==t){e.next=18;break}this.$router.push({name:"TicketPlan",params:{productSubId:n.id,productId:n.productId,productSubName:n.name}}),e.next=30;break;case 18:if("plan"!==t){e.next=22;break}this.$router.push({name:"PlanList",params:{productSubId:n.id,productSubName:n.name}}),e.next=30;break;case 22:if("delete"!==t){e.next=29;break}return e.next=25,this.post("/api/product/scenic/sub/delete/".concat(n.id));case 25:i=e.sent,i.success&&(this.$Notice.success({title:"删除成功"}),this.$emit("on-query")),e.next=30;break;case 29:"modify"===t&&this.$router.push({name:"TicketUpdate",params:{productSub:n}});case 30:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}},m=h,v=n("2877"),b=Object(v["a"])(m,d,f,!1,null,null,null);b.options.__file="table-expland.vue";var g=b.exports,y=n("90de"),w=n("9dac"),x=n("8f0c"),k={name:"Scenery",components:{ExpandRow:g,OssUpload:w["a"]},mixins:[l["a"],c["a"],p["a"]],data:function(){var e=this;this.$createElement;return{addUrl:"/api/product/scenic/update",updateUrl:"/api/product/scenic/update",removeUrl:"/api/product/scenic/delete",table:{url:"/api/product/scenic/list",query:{name:null,subName:null},cols:[{type:"expand",width:50,render:function(t,n){return t(g,{attrs:{rows:n.row.subs},on:{"on-query":e.doQuery}})}},{title:"主产品名",key:"name"},{title:"操作",width:350,align:"center",render:function(t,n){return e.renderActions(t,n,[{config:{loading:e.loadingBtn,style:{marginRight:"5px"}},click:function(){return e.addTicket(n.row)},text:"增票据"},{config:{loading:e.loadingBtn,style:{marginRight:"5px"}},click:function(){return e.update(n.row)},text:"修改"},{type:"delete",config:{loading:e.loadingBtn,style:{marginRight:"5px"}},click:function(){return e.remove(n.row)},text:"删除"},{config:{loading:e.loadingBtn,style:{marginRight:"5px"}},click:function(){return e.showDetail(n.row)},text:"详情"}])}}],data:[]},vo:{id:null,name:null,province:null,area:null,tel:null,level:null,adress:null,transitLine:null,map:null,blurb:null,imgs:null,pcastr:null},imgs:[],pcastr:[],uploadList:[],ruleValidate:{name:[{required:!0,message:"不能为空",trigger:"blur"},{trigger:"blur",validator:null}],area:[{required:!0,message:"不能为空"}],tel:[{required:!0,message:"不能为空",trigger:"blur"},{trigger:"blur",validator:y["e"]}],pcastr:[{required:!0,message:"不能为空",trigger:"blur"}],level:[{required:!0,message:"不能为空"}]}}},computed:{generateAddOrUpdate:function(){var e=this.pcastr[this.pcastr.length-1]||{};return Object(u["a"])({},this.vo,{area:e.code,pcastr:this.pcastr.map(function(e){return e.name}).join(""),imgs:s()(this.imgs.map(function(e){return{link:e.name}}))})}},watch:{pcastr:function(e,t){this.vo.pcastr=e.map(function(e){return e.name}).join("")}},mounted:function(){x["a"].$on("scenery-update",this.doQuery)},methods:{showDetail:function(e){console.log(e)},processQueryData:function(e){return e.map(function(e){return Object(u["a"])({},e,{_expanded:!0})})},addTicket:function(e){this.$router.push({name:"TicketAdd",params:{productId:e.id,productName:e.name}})},add:function(){var e=this;this.$super(p["a"]).add(),this.imgs=[],this.vo.area=null,this.$nextTick(function(){e.$refs.pcastr.$children[0].clearSelect()})},update:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$super(p["a"]).update(t),this.setByItem(t);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),setByItem:function(e){if(e.area&&this.setAddress("pcastr",e.area),e.imgs){var t=JSON.parse(e.imgs);this.imgs=t.map(function(e){return{name:e.link,status:!0}})}},setAddress:function(e,t){var n=t.toString();this[e]=[n.substring(0,2).padEnd(6,"0"),n.substring(0,4).padEnd(6,"0"),n]},afterRemove:function(e,t){var n=this;console.log(123),this.$nextTick(function(){return n.loadingBtn=!1}),console.log(this.loadingBtn)}}},R=k,O=(n("944f"),Object(v["a"])(R,r,a,!1,null,null,null));O.options.__file="scenery.vue";t["default"]=O.exports},a7ee:function(e,t,n){"use strict";n("c5f6");var r=n("fae4"),a=n.n(r),i=n("a4bb"),o=n.n(i),s=(n("ac6a"),n("96cf"),n("3b8d")),u=n("cebc");t["a"]={data:function(){return{table:{data:[],query:{pageNum:1,pageSize:10},initQuery:{},total:0},loadingBtn:!1}},created:function(){this.table.initQuery=Object(u["a"])({},this.table.query)},mounted:function(){this.doQuery()},methods:{onReload:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:o()(this.table.query).filter(function(e){return a()(t.table.initQuery,e)}).forEach(function(e){return t.table.query[e]=t.table.initQuery[e]}),this.doQuery();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),beforeQuery:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),afterQuery:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),processQueryData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),doQuery:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.beforeQuery();case 2:if(t=e.sent,!1===t){e.next=17;break}return e.next=6,this.get(this.table.url,Object(u["a"])({},this.table.query));case 6:if(n=e.sent,!n.success||!n.value){e.next=15;break}return e.next=10,this.processQueryData(n.value.list?n.value.list:n.value||[],n);case 10:r=e.sent,this.table.data=r,this.table.total=Number(n.value.total)||this.table.data.lenght,e.next=17;break;case 15:this.table.data=[],this.table.total=0;case 17:return this.loadingBtn=!1,e.next=20,this.afterQuery();case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changePage:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.table.query.pageNum=t,this.doQuery();case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),changePageSize:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.table.query.pageSize=t,this.doQuery();case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}}},b54a:function(e,t,n){"use strict";n("386b")("link",function(e){return function(t){return e(this,"a","href",t)}})},b5b1:function(e,t,n){n("a465"),e.exports=n("584a").Reflect.deleteProperty},cbd4:function(e,t,n){},d206:function(e,t,n){var r=n("63b6");r(r.S,"Reflect",{has:function(e,t){return t in e}})},d656:function(e,t,n){e.exports=n("b5b1")},fae4:function(e,t,n){e.exports=n("05ca")},fbc3:function(e,t,n){"use strict";var r=n("fae4"),a=n.n(r),i=n("a4bb"),o=n.n(i),s=(n("ac6a"),n("a745")),u=n.n(s),c=(n("96cf"),n("3b8d")),l=n("cebc");t["a"]={data:function(){return{model:!1,vo:{id:null},loadingBtn:!1,addTitle:"新增",updateTitle:"修改"}},computed:{isUpdate:function(){return null!==this.vo.id&&void 0!==this.vo.id},postUrl:function(){return this.isUpdate?this.updateUrl:this.addUrl},modelTitle:function(){return this.isUpdate?this.updateTitle:this.addTitle},generateAddOrUpdate:function(){return Object(l["a"])({},this.vo)},formRef:function(){return"form"}},methods:{generateRemove:function(e){return{}},beforeAddOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),afterAddOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doRequest:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.post(this.postUrl,this.generateAddOrUpdate));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),addOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$refs[this.formRef],(u()(t)?t[0]:t).validate(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,n.doAddOrUpdate();case 3:e.next=7;break;case 5:n.resetLoadingBtn(),n.$Message.error("表单验证失败!");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),doAddOrUpdate:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.beforeAddOrUpdate();case 2:if(t=e.sent,n=!0,!1===t){e.next=10;break}return e.next=7,this.doRequest();case 7:r=e.sent,a=r,n=a.success;case 10:return!1===n?this.resetLoadingBtn():(this.model=!1,this._timeoutQuery()),e.next=13,this.afterAddOrUpdate(n,r);case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),beforeRemove:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.__removeUrl?this.removeUrl=this.__removeUrl:this.__removeUrl=this.removeUrl,this.removeUrl="".concat(this.removeUrl,"/").concat(t.id);case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),afterRemove:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),remove:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.beforeRemove(t);case 4:if(n=e.sent,r=!0,!1===n){e.next=11;break}return e.next=9,this.post(this.removeUrl,this.generateRemove(t));case 9:a=e.sent,r=a.success;case 11:return!1===r?this.resetLoadingBtn():this._timeoutQuery(),e.next=14,this.afterRemove(r,t);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),add:function(){this.model=!0,this.vScrollToTop(),this.loadingBtn=!0,this.$refs[this.formRef].resetFields(),this.vo.id=null},update:function(e){var t=this;this.model=!0,this.vScrollToTop(),this.loadingBtn=!0,o()(this.vo).filter(function(t){return a()(e,t)}).forEach(function(n){return t.vo[n]=e[n]})},vScrollToTop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vScroll";this.$refs[e]&&this.$refs[e].scrollTo({x:0,y:0})},cancel:function(){this.loadingBtn=!1},resetLoadingBtn:function(){var e=this;this.loadingBtn=!1,this.$nextTick(function(){return e.loadingBtn=!0})},_timeoutQuery:function(){var e=this;"function"===typeof this.doQuery&&setTimeout(function(){return e.doQuery()},500)}}}}}]);
//# sourceMappingURL=chunk-67a8f425.8dcdc20b.js.map