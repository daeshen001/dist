(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e6502"],{"97e3":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("i-col",[a("Table",{attrs:{columns:t.defaultCols,data:t.table.data}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.table.total,"show-sizer":!0,placement:"top"}})],1)])],1),a("Modal",{attrs:{title:t.shareModalTitle},model:{value:t.shareModal,callback:function(e){t.shareModal=e},expression:"shareModal"}},[a("Table",{attrs:{columns:t.shareCols,data:t.shareData}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",[t._v("关闭")])],1)])],1),a("Modal",{model:{value:t.detailModal,callback:function(e){t.detailModal=e},expression:"detailModal"}},[a("Form",{staticStyle:{"margin-top":"20px"},attrs:{"label-width":100}},[a("FormItem",{attrs:{label:"活动名称: "}},[a("span",[t._v(t._s(t.detailData.name))])]),a("FormItem",{attrs:{label:"资源商: "}},[a("span",[t._v(t._s(t.detailData.epId))])]),a("FormItem",{attrs:{label:"活动开始时间: "}},[a("span",[t._v(t._s(t._f("dateFormat")(t.detailData.startDate)))])]),a("FormItem",{attrs:{label:"活动结束时间: "}},[a("span",[t._v(t._s(t._f("dateFormat")(t.detailData.endDate)))])]),a("FormItem",{attrs:{label:"积分有效开始: "}},[a("span",[t._v(t._s(t._f("dateFormat")(t.detailData.pointsStartDate)))])]),a("FormItem",{attrs:{label:"积分结束时间: "}},[a("span",[t._v(t._s(t._f("dateFormat")(t.detailData.pointsEndDate)))])]),a("FormItem",{attrs:{label:"活动类型: "}},[a("span",[t._v(t._s(t.detailData.type))])]),a("FormItem",{attrs:{label:"派发对象: "}},[a("span",[t._v(t._s(t.detailData.epId))])]),a("FormItem",{attrs:{label:"活动内容: "}},[a("span",[t._v(t._s(t.detailData.content))])]),a("FormItem",{attrs:{label:"状态: "}},[a("span",[t._v(t._s(t.detailData.pubState))])]),a("FormItem",{attrs:{label:"活动发布时间: "}},[a("span",[t._v(t._s(t._f("dateFormat")(t.detailData.publishTime)))])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",[t._v("关闭")])],1)])],1),a("Modal",{attrs:{width:"360"},model:{value:t.qcodeModal,callback:function(e){t.qcodeModal=e},expression:"qcodeModal"}},[a("p",{staticStyle:{color:"gray","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("右键二维码，点击另存为")])]),a("div",{staticStyle:{"text-align":"center"}},[a("canvas",{attrs:{id:"qr"}})]),a("div",{attrs:{slot:"footer"},slot:"footer"})]),a("Modal",{attrs:{title:"活动内容更新"},model:{value:t.modifyModal,callback:function(e){t.modifyModal=e},expression:"modifyModal"}},[a("content-publish",{ref:"modifyRef",attrs:{"parent-state":!0}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.hideModifyWindow}},[t._v("取消")]),a("Button",{attrs:{type:"primary"},on:{click:t.submitModify}},[t._v("提交更新")])],1)])],1)],1)},n=[],o=a("a4bb"),i=a.n(o),s=(a("ac6a"),a("7f7f"),a("96cf"),a("3b8d")),l=a("a7ee"),d=a("9a3e"),c=a("88ec"),u=a("086f"),f=a("a80e"),m={name:"PublishList",components:{DateFormat:c["a"],ContentPublish:f["default"]},filters:{dateFormat:function(t){return Object(c["a"])(t)}},mixins:[d["a"],l["a"]],data:function(){var t=this;return{shareModal:!1,detailModal:!1,modifyModal:!1,qcodeModal:!1,shareModalTitle:"分发对象",table:{url:"/api/nmedia/content",query:{type:0}},detailData:{name:"",epId:"",startDate:"",endDate:"",pointsStartDate:"",pointsEndDate:"",type:"",content:"",publishTime:"",pubState:!0},shareData:[],shareCols:[{title:"分发商名称",key:"epName"},{title:"指定时间",key:"inTime",render:this.renderDate}],defaultCols:[{title:"资源商",key:"epName"},{title:"活动内容",key:"content"},{title:"类型",key:"type",render:function(t,e){var a=e.row,r=1===a.type?"形象宣传":"优惠活动";return t("span",r)}},{title:"开始日期",key:"startDate",render:this.renderDate},{title:"结束日期",key:"endDate",render:this.renderDate},{title:"发布日期",key:"publishTime",render:this.renderDate},{title:"派发对象",key:"shareIds",width:100,align:"center",render:function(e,a){return t.renderActions(e,a,[{click:function(){return t.viewShare(a.row)},text:"查看"}])}},{title:"状态",width:120,align:"center",key:"status",render:function(t,e){var a=e.row,r=void 0===a.publishTime||a.publishTime<=a.startDate?"未发布":"已发布";return t("span",r)}},{title:"操作",key:"action",width:200,align:"center",render:function(e,a){return t.renderActions(e,a,[{config:{style:{marginRight:"5px"}},click:function(){return t.modifyActivt(a.row)},text:"编辑"},{click:function(){return t.viewDetail(a.row)},text:"预览"}])}},{title:"推广二维码",key:"qrcode",width:100,render:function(e,a){return t.renderActions(e,a,[{click:function(){return t.viewQcode(a.row)},text:"获取"}])}}]}},methods:{test:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get("/api/nmedia/role/o1wxy1qF_xAu9q92yimEOwESd8sc");case 2:e=t.sent,console.log(e);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),viewShare:function(t){this.shareModal=!0,this.shareModalTitle="".concat(t.epName," - ").concat(t.name," 的分发对象"),this.getShareObject(t.id)},getShareObject:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.get("/api/nmedia/content/share/".concat(e));case 2:a=t.sent,this.shareData=a.value;case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),cancelShareModal:function(){this.shareModal=!1},viewDetail:function(t){var e=this;this.detailModal=!0,i()(this.detailData).forEach(function(a){return e.detailData[a]=t[a]})},hideModifyWindow:function(){this.modifyModal=!1},modifyActivt:function(t){this.modifyModal=!0,this.$refs.modifyRef.initModifyData(t)},submitModify:function(){this.$refs.modifyRef.submitModifyData()},viewQcode:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.qcodeModal=!0,t.next=3,u["a"].toCanvas({nodeQrCodeOptions:{margin:0},canvas:document.getElementById("qr"),content:"aaaaa",width:200});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},h=m,p=a("2877"),v=Object(p["a"])(h,r,n,!1,null,null,null);v.options.__file="list.vue";e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0e6502.4ca3a856.js.map