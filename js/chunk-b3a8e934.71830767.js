(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3a8e934"],{"8f0c":function(e,t,a){"use strict";var r=a("2b0e");t["a"]=new r["default"]},f83e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",[a("Form",{ref:"vo",attrs:{model:e.vo,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"产品名",prop:"productName"}},[a("Input",{staticStyle:{width:"600px"},attrs:{readonly:""},model:{value:e.productName,callback:function(t){e.productName=t},expression:"productName"}})],1),a("FormItem",{attrs:{label:"子产品名",prop:"name"}},[a("Input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入子产品"},model:{value:e.vo.name,callback:function(t){e.$set(e.vo,"name",t)},expression:"vo.name"}})],1),a("FormItem",{attrs:{label:"凭证配置",prop:"voucherId"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.vo.voucherId,callback:function(t){e.$set(e.vo,"voucherId",t)},expression:"vo.voucherId"}},e._l(e.voucherList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"success"}},[e._v("拉取产品")])],1),a("FormItem",{attrs:{label:"短信模板",prop:"voucherTemplate"}},[a("Select",{staticStyle:{width:"200px"},on:{"on-change":e.smsChange},model:{value:e.vo.voucherTemplate,callback:function(t){e.$set(e.vo,"voucherTemplate",t)},expression:"vo.voucherTemplate"}},e._l(e.voucherTemplateList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.title))])}),1)],1),a("FormItem",{attrs:{label:"市场价",prop:"marketPrice"}},[a("InputNumber",{attrs:{min:0,formatter:function(e){return e/100},parser:function(e){return 100*e}},model:{value:e.vo.marketPrice,callback:function(t){e.$set(e.vo,"marketPrice",t)},expression:"vo.marketPrice"}})],1),a("FormItem",{attrs:{label:"团/散",prop:"ticketFlag"}},[a("RadioGroup",{model:{value:e.vo.ticketFlag,callback:function(t){e.$set(e.vo,"ticketFlag",t)},expression:"vo.ticketFlag"}},[a("Radio",{attrs:{label:"2001"}},[e._v("团")]),a("Radio",{attrs:{label:"2002"}},[e._v("散")])],1)],1),"2001"===e.vo.ticketFlag?a("FormItem",{attrs:{label:"最低购买数",prop:"ticketFlag"}},[a("InputNumber",{staticStyle:{width:"600px"},attrs:{min:1},model:{value:e.vo.minBuyQuantity,callback:function(t){e.$set(e.vo,"minBuyQuantity",t)},expression:"vo.minBuyQuantity"}})],1):e._e(),"2002"===e.vo.ticketFlag?a("FormItem",{attrs:{label:"最高购买数",prop:"ticketFlag"}},[a("InputNumber",{staticStyle:{width:"600px"},attrs:{min:1},model:{value:e.vo.maxBuyQuantity,callback:function(t){e.$set(e.vo,"maxBuyQuantity",t)},expression:"vo.maxBuyQuantity"}})],1):e._e(),a("FormItem",{attrs:{label:"成人/儿童",prop:"ticketDict"}},[a("RadioGroup",{model:{value:e.vo.ticketDict,callback:function(t){e.$set(e.vo,"ticketDict",t)},expression:"vo.ticketDict"}},[a("Radio",{attrs:{label:3001}},[e._v("成人")]),a("Radio",{attrs:{label:3002}},[e._v("儿童")])],1)],1),a("FormItem",{attrs:{label:"实名制",prop:"realName"}},[a("RadioGroup",{model:{value:e.vo.realName,callback:function(t){e.$set(e.vo,"realName",t)},expression:"vo.realName"}},[a("Radio",{attrs:{label:1}},[e._v("是")]),a("Radio",{attrs:{label:0}},[e._v("否")])],1)],1),"1"===e.vo.realName?a("FormItem",{attrs:{label:"身份证次数限制"}},[e._v("一张身份证一天内购买\n            "),a("InputNumber",{staticStyle:{width:"3%"},attrs:{min:1},model:{value:e.vo.sidDayCount,callback:function(t){e.$set(e.vo,"sidDayCount",t)},expression:"vo.sidDayCount"}}),e._v("次，0表示不限次数，每日最多购买\n            "),a("InputNumber",{staticStyle:{width:"3%"},attrs:{min:1},model:{value:e.vo.sidDayQuantity,callback:function(t){e.$set(e.vo,"sidDayQuantity",t)},expression:"vo.sidDayQuantity"}}),e._v("/张，0表示不限张数\n        ")],1):e._e(),a("FormItem",{attrs:{label:"预定须知",prop:"bookNotes"}},[a("Input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入使用须知"},model:{value:e.vo.bookNotes,callback:function(t){e.$set(e.vo,"bookNotes",t)},expression:"vo.bookNotes"}})],1),a("FormItem",{attrs:{label:"使用须知",prop:"useNotes"}},[a("Input",{staticStyle:{width:"600px"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:10},placeholder:"请输入预定须知"},model:{value:e.vo.userNotes,callback:function(t){e.$set(e.vo,"userNotes",t)},expression:"vo.userNotes"}})],1),a("FormItem",{attrs:{label:"图片",prop:"imgs"}},[a("OssUpload",{attrs:{files:e.imgs,size:5,format:["jpg","jpeg","png"],accept:"image/*"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("vo")}}},[e._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){t.preventDefault(),e.$router.go(-1)}}},[e._v("返回")])],1)],1)],1)},o=[],i=a("5d73"),l=a.n(i),s=(a("96cf"),a("3b8d")),n=(a("c5f6"),a("7f7f"),a("f499")),u=a.n(n),c=a("cebc"),m=a("9dac"),p=a("8f0c"),v={name:"TicketAdd",components:{OssUpload:m["a"]},data:function(){return{voucherList:[],voucherTemplateList:[],productName:null,vo:{id:null,productId:null,maId:null,voucherId:null,name:null,ticketFlag:null,ticketDict:null,marketPrice:null,minPrice:null,settlePrice:null,sidDayCount:null,sidDayQuantity:null,minBuyQuantity:null,maxBuyQuantity:null,lowUseQuantity:null,realName:null,bookNotes:null,userNotes:null,imgs:null,voucherMsg:null,voucherTemplate:null,ticketMsg:null},imgs:[],ruleValidate:{name:[{required:!0,message:"子产品名不能为空"},{trigger:"blur",validator:null}],voucherTemplate:[{required:!0,message:"短信不能为空"}],maId:[{required:!0,message:"码id不能为空",trigger:"blur"}],marketPrice:[{required:!0,message:"请输入市场价"}],settlePrice:[{required:!0,message:"请输入结算价"}],minPrice:[{required:!0,message:"请输入最低价格"}],ticketDict:[{required:!0,message:"请选择成人儿童类型"}],ticketFlag:[{required:!0,message:"请选择团散类型"}],realName:[{required:!0,message:"是否实名制"}]}}},computed:{generateAddOrUpdate:function(){return Object(c["a"])({},this.vo,{imgs:u()(this.imgs.map(function(e){return{link:e.name}})),ticketDict:Number(this.vo.ticketDict),ticketFlag:Number(this.vo.ticketFlag),realName:Number(this.vo.realName)})}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.vo.productId=this.$route.params.productId,this.productName=this.$route.params.productName,e.next=4,this.get("/api/setting/fxma/list");case 4:return t=e.sent,t.success&&(this.voucherList=t.value),e.next=8,this.get("api/sms-template/list",{type:2});case 8:a=e.sent,a.success&&(this.voucherTemplateList=a.value);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{handleSubmit:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.vo.validate();case 2:if(a=e.sent,!a){e.next=10;break}return e.next=6,this.post("/api/product/scenic/sub/update",this.generateAddOrUpdate);case 6:r=e.sent,r.success&&(this.$Notice.success({title:"新增子产品成功"}),p["a"].$emit("scenery-update"),this.$router.push("/product/scenery")),e.next=11;break;case 10:this.$Message.error("表单验证失败");case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),smsChange:function(e){console.log(1111);var t=!0,a=!1,r=void 0;try{for(var o,i=l()(this.voucherTemplateList);!(t=(o=i.next()).done);t=!0){var s=o.value;console.log(s),s.id===e&&(this.vo.voucherMsg=s.content)}}catch(n){a=!0,r=n}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}}}},d=v,h=a("2877"),b=Object(h["a"])(d,r,o,!1,null,null,null);b.options.__file="ticket-add.vue";t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-b3a8e934.71830767.js.map